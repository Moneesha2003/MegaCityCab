<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sign Up - Mega City Cab</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <style>
            /* General Styles */
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: 'Poppins', sans-serif;
            }

            body {
                background: url('assets/images/Taxi.jpg') center/cover no-repeat;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                color: #333;
            }

            /* Container */
            .container {
                background: rgba(255, 255, 255, 0.9);
                padding: 30px;
                border-radius: 10px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                width: 350px;
                text-align: center;
                animation: fadeIn 1s ease-in-out;
            }

            /* Heading */
            h2 {
                margin-bottom: 20px;
                font-size: 1.8rem;
                color: #222;
            }

            /* Form Inputs */
            .input-group {
                position: relative;
                margin-bottom: 15px;
            }

            .input-group input {
                width: 100%;
                padding: 12px 40px;
                border: 1px solid #ccc;
                border-radius: 5px;
                font-size: 1rem;
                outline: none;
                transition: border 0.3s ease-in-out;
            }

            .input-group input:focus {
                border-color: #ffd700;
            }

            /* Icons */
            .input-group i {
                position: absolute;
                left: 15px;
                top: 50%;
                transform: translateY(-50%);
                font-size: 1.2rem;
                color: #888;
            }

            /* Buttons */
            button {
                width: 100%;
                padding: 12px;
                background: #ffd700;
                border: none;
                font-size: 1rem;
                border-radius: 5px;
                cursor: pointer;
                transition: background 0.3s, transform 0.3s;
            }

            button:hover {
                background: #e6c300;
                transform: scale(1.05);
            }

            /* Clear Button */
            .clear-btn {
                background: #999;
                margin-top: 10px;
            }

            .clear-btn:hover {
                background: #777;
            }

            /* Messages */
            .message {
                font-size: 0.9rem;
                margin-top: 10px;
                color: red;
            }

            .signin-text {
                margin-top: 15px;
            }

            .signin-text a {
                color: #ffd700;
                text-decoration: none;
                font-weight: bold;
                transition: color 0.3s;
            }

            .signin-text a:hover {
                color: #e6c300;
            }

            /* Animations */
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(-20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>
    </head>
    <div class="container">
        <h2>Sign Up</h2>

        <div class="input-group">
            <i class="fa-solid fa-user"></i>
            <input type="text" id="name" placeholder="Full Name">
        </div>

        <div class="input-group">
            <i class="fa-solid fa-envelope"></i>
            <input type="email" id="email" placeholder="Email">
        </div>

        <div class="input-group">
            <i class="fa-solid fa-phone"></i>
            <input type="text" id="contact" placeholder="Contact Number">
        </div>

        <div class="input-group">
            <i class="fa-solid fa-location-dot"></i>
            <input type="text" id="address" placeholder="Address">
        </div>

        <div class="input-group">
            <i class="fa-solid fa-id-card"></i>
            <input type="text" id="NIC" placeholder="NIC">
        </div>

        <div class="input-group">
            <i class="fa-solid fa-lock"></i>
            <input type="password" id="password" placeholder="Password">
        </div>


        <button onclick="signup()">Sign Up</button>
        <button class="clear-btn" onclick="clearForm()">Clear</button>

        <p class="message" id="message"></p>

        <p class="signin-text">Already have an account? <a href="signin.html">Sign In</a></p>
    </div>
    <script>
        function validateForm(name, email, contact, address, NIC, password) {
            let isValid = true;

            // Name validation (Only letters & spaces, min 3 characters)
            if (!/^[A-Za-z\s]{3,}$/.test(name)) {
                document.getElementById('nameError').innerText = "Enter a valid name (Min 3 letters).";
                isValid = false;
            } else {
                document.getElementById('nameError').innerText = "";
            }

            // Email validation
            if (!/^\S+@\S+\.\S+$/.test(email)) {
                document.getElementById('emailError').innerText = "Enter a valid email.";
                isValid = false;
            } else {
                document.getElementById('emailError').innerText = "";
            }

            // Contact Number validation (Only numbers, min 10 digits)
            if (!/^\d{10,}$/.test(contact)) {
                document.getElementById('contactError').innerText = "Enter a valid contact number (Min 10 digits).";
                isValid = false;
            } else {
                document.getElementById('contactError').innerText = "";
            }

            // Address validation (Only letters & spaces, min 3 characters)
            if (!/^[A-Za-z\s]{3,}$/.test(address)) {
                document.getElementById('addressError').innerText = "Enter a valid address (Min 3 letters).";
                isValid = false;
            } else {
                document.getElementById('addressError').innerText = "";
            }

            // NIC validation (Only numbers, min 12 digits)
            if (!/^\d{12,}$/.test(NIC)) {
                document.getElementById('NICError').innerText = "Enter a valid NIC (Min 12 digits).";
                isValid = false;
            } else {
                document.getElementById('NICError').innerText = "";
            }

            // Password validation (Min 6 chars, 1 uppercase, 1 number, 1 special char)
            if (!/^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/.test(password)) {
                document.getElementById('passwordError').innerText = "Min 6 chars, 1 uppercase, 1 number, 1 special char.";
                isValid = false;
            } else {
                document.getElementById('passwordError').innerText = "";
            }

            return isValid;
        }

        function signup() {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const contact = document.getElementById('contact').value;
            const address = document.getElementById('address').value;
            const NIC = document.getElementById('NIC').value;
            const password = document.getElementById('password').value;
            const message = document.getElementById('message');

            if (!validateForm(name, email, contact, address, NIC, password)) {
                message.style.color = "red";
                message.innerText = "Please fix the errors above.";
                return;
            }

            const customer = {name, email, contact, address, NIC, password};

            fetch('http://localhost:8080/MegaCityService/resources/customers', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(customer)
            })
                    .then(response => {
                        if (response.status === 201) {
                            message.style.color = "green";
                            message.innerText = "Sign up successful!";
                        } else {
                            message.style.color = "red";
                            message.innerText = "Sign up failed. Try again.";
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        message.style.color = "red";
                        message.innerText = "An error occurred.";
                    });
        }


        function clearForm() {
            document.getElementById('name').value = "";
            document.getElementById('email').value = "";
            document.getElementById('contact').value = "";
            document.getElementById('address').value = "";
            document.getElementById('NIC').value = "";
            document.getElementById('password').value = "";
            document.getElementById('message').innerText = "";
            document.getElementById('nameError').innerText = "";
            document.getElementById('emailError').innerText = "";
            document.getElementById('contactError').innerText = "";
            document.getElementById('addressError').innerText = "";
            document.getElementById('NICError').innerText = "";
            document.getElementById('passwordError').innerText = "";
        }
    </script>
</body>
</html>
