<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile</title>
    <style>
        /* Your styling here */
    </style>
</head>
<body>

    <div id="profile-form">
        <h2>My Profile</h2>
        <form>
            <label for="name">Name:</label>
            <input type="text" id="name" disabled><br><br>

            <label for="email">Email:</label>
            <input type="email" id="email" disabled><br><br>

            <label for="contact">Contact:</label>
            <input type="text" id="contact" disabled><br><br>

            <label for="password">Password:</label>
            <input type="password" id="password" disabled><br><br>
        </form>
    </div>

    <script>
        // Check if user is logged in by checking session or stored token
        document.addEventListener('DOMContentLoaded', function() {
            const accountsLink = document.getElementById('accounts-link');
            const userEmail = sessionStorage.getItem('userEmail');  // Example: Use sessionStorage or any method to check if the user is logged in

            if (userEmail) {
                accountsLink.style.display = 'block';  // Show "Accounts" link
                fetchUserProfile(userEmail);  // Fetch user profile details
            }
        });

        function fetchUserProfile(email) {
            fetch(`http://localhost:8080/MegaCityService/resources/customers/${email}`)
                .then(response => response.json())
                .then(data => {
                    // Populate the form with the fetched data
                    document.getElementById('name').value = data.name;
                    document.getElementById('email').value = data.email;
                    document.getElementById('contact').value = data.contact;
                    document.getElementById('password').value = data.password;
                })
                .catch(error => console.error('Error fetching user profile:', error));
        }
    </script>
</body>
</html>
